<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cart / Checkout — JNG</title>
  <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
<div class="app">
  <nav class="side-nav">
    <div class="logo"><img src="images/logo.jpg" alt="logo"><div style="font-weight:700">JNG Solar</div></div>
    <a href="index.html">Home</a>
    <a href="products.html">Products</a>
    <a href="services.html">Services</a>
    <a href="contact.html">Contact</a>
    <a href="cart.html" class="active">Cart</a>
  </nav>

  <main class="main">
    <div class="topbar"><button id="menu-toggle" class="menu-toggle">☰</button><div class="brand">Checkout</div></div>

    <section class="section">
      <h2>Your Cart</h2>
      <div id="cart-list"></div>
    </section>

    <section class="section">
      <h2>Checkout</h2>
      <form id="checkout-form">
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <input required name="name" placeholder="Full name" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd">
          <input required name="email" placeholder="Email" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd">
        </div>
        <div style="margin-top:12px">
          <input required name="address" placeholder="Address" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd">
        </div>
        <div style="margin-top:12px;display:flex;gap:12px;flex-wrap:wrap">
          <button class="btn btn-primary" type="submit">Place Order (Demo)</button>
          <!-- Stripe Checkout button -->
          <button id="stripe-checkout-btn" type="button" class="btn btn-primary" style="background:linear-gradient(90deg,var(--accent-blue),var(--accent-purple));">Pay with Card (Stripe)</button>
        </div>
      </form>
      <div id="checkout-result" style="margin-top:12px"></div>
    </section>

    <footer class="footer"><div class="inner">© JNG Solar & Security</div></footer>
  </main>
</div>

<script src="scripts/main.js"></script>
<script>
// render cart from localStorage and handle checkout (client-side demo)
function renderCartOnPage(){
  const cart = JSON.parse(localStorage.getItem('cart') || '[]');
  const el = document.getElementById('cart-list');
  el.innerHTML = '';
  if(cart.length===0){ el.innerHTML = '<div style="padding:12px;color:#666">Cart is empty</div>'; return; }
  cart.forEach(item=>{
    const row = document.createElement('div');
    row.style.display='flex';row.style.gap='12px';row.style.alignItems='center';row.style.padding='8px 0';
    row.innerHTML = `<img src="${item.image}" style="width:80px;height:60px;object-fit:cover;border-radius:6px"><div style="flex:1"><strong>${item.title}</strong><div style="color:#666">${item.qty} × ${item.price}</div></div><div><button class="remove" data-id="${item.id}">Remove</button></div>`;
    el.appendChild(row);
  });
  el.querySelectorAll('.remove').forEach(btn=> btn.addEventListener('click', e=>{ const id=e.target.dataset.id; const c=JSON.parse(localStorage.getItem('cart')||'[]'); const idx=c.findIndex(i=>i.id===id); if(idx>-1){ c.splice(idx,1); localStorage.setItem('cart', JSON.stringify(c)); renderCartOnPage(); } }));
}
renderCartOnPage();

document.getElementById('checkout-form').addEventListener('submit', function(e){
  e.preventDefault();
  // demo: show success and clear cart
  document.getElementById('checkout-result').textContent = 'Order placed (demo). You will receive an email confirmation.';
  localStorage.removeItem('cart');
  renderCartOnPage();
});
</script>
</body>
</html>

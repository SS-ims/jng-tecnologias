<!doctype html>
<html lang="en">
<%- include('partials/head', { title: 'Admin — JNG' }) %>
<body>
  <div class="app">
    <%- include('partials/nav', { activePage: '' }) %>

    <main class="main">
      <div class="topbar"><button id="menu-toggle" class="menu-toggle">☰</button><div class="brand">Admin</div></div>

      <section class="section">
        <h2>Manage Products</h2>
        <div class="cards" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr))">
          <% products.forEach(product => { %>
            <article class="card">
              <img src="/<%= product.image %>" alt="<%= product.name %>">
              <h3><%= product.name %></h3>
              <p class="muted"><%= product.description %></p>
              <div class="price"><%= formatCurrency(product.price) %></div>
              <div style="display:flex;gap:8px;align-items:center">
                <form method="POST" action="/admin/products/<%= product.id %>/delete" style="margin:0">
                  <button class="btn btn-quote" type="submit">Delete</button>
                </form>
                <form method="POST" action="/admin/products/<%= product.id %>/feature" style="margin:0">
                  <button class="btn btn-primary" type="submit"><%= product.featured ? 'Unfeature' : 'Feature' %></button>
                </form>
              </div>
            </article>
          <% }) %>
        </div>
      </section>

      <section class="section">
        <h2>Add Product</h2>
        <form method="POST" action="/admin/products" class="card" style="max-width:720px">
          <input required name="id" placeholder="Product ID (e.g. p5)" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd">
          <input required name="name" placeholder="Name" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd">
          <textarea required name="description" placeholder="Description" style="width:100%;height:120px;padding:10px;border-radius:8px;border:1px solid #ddd"></textarea>
          <input required name="price" type="number" step="0.01" min="0" placeholder="Price" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd">
          <input required name="image" placeholder="Image path (e.g. images/product1.jpg)" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd">
          <label style="display:flex;gap:8px;align-items:center">
            <input type="checkbox" name="featured" value="1"> Featured
          </label>
          <button class="btn btn-primary" type="submit">Save Product</button>
        </form>
      </section>

      <%- include('partials/footer') %>
    </main>

    <%- include('partials/chat') %>
  </div>

  <script src="/scripts/main.js"></script>
</body>
</html>
